(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3949:(e,s,t)=>{Promise.resolve().then(t.bind(t,5784))},5784:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(5155),r=t(2115);let l=(0,t(4131).UU)("https://yeicnhotqdfwnjkkopcr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InllaWNuaG90cWRmd25qa2tvcGNyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwMzg0MzgsImV4cCI6MjA4NTYxNDQzOH0.QpZZsSMq6dlqaF3r8pkVs4LtreYlSpir9LRKC-8gE_c");var n=t(2823);function i(e){let{state:s,currentTask:t,currentTaskId:r,activeSubAgents:l}=e;return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(n.A,{className:"w-7 h-7 text-ft-light"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold font-heading",children:"V3ktor Status"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Operational overview"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Updated: ",(0,a.jsx)("span",{className:"font-mono",children:new Date().toLocaleTimeString()})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 block mb-2",children:"Operational State"}),(0,a.jsx)("div",{className:"inline-flex items-center gap-3",children:(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat({working:"bg-green-100 text-green-800 border-green-300",idle:"bg-yellow-100 text-yellow-800 border-yellow-300",waiting:"bg-blue-100 text-blue-800 border-blue-300",offline:"bg-red-100 text-red-800 border-red-300"}[s]),children:{working:"\uD83D\uDFE2 Working",idle:"\uD83D\uDFE1 Idle",waiting:"\uD83D\uDD35 Waiting for Input",offline:"\uD83D\uDD34 Offline / Paused"}[s]})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 block mb-2",children:"Current Primary Task"}),t?(0,a.jsxs)("div",{className:"bg-gray-50 px-4 py-3 rounded-md",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-800",children:t}),r&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",r]})]}):(0,a.jsxs)("div",{className:"bg-gray-50 px-4 py-3 rounded-md text-sm text-gray-600",children:["idle"===s?"No active task.":"Waiting for input.","idle"===s&&" Reason: Awaiting user instruction."]})]}),l.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 block mb-2",children:"Active Sub-Agents"}),(0,a.jsx)("div",{className:"space-y-2",children:l.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 px-3 py-2 rounded-md text-sm",children:[(0,a.jsx)("div",{className:"font-medium text-gray-800",children:e.role}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Task: ",e.assigned_task]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Status: ",e.status]})]},s))})]})]})}var d=t(9765);let c=[{status:"todo",label:"To Do"},{status:"in_progress",label:"In Progress"},{status:"done",label:"Done"}],o={low:"bg-gray-100 text-gray-700",medium:"bg-blue-100 text-blue-700",high:"bg-orange-100 text-orange-700",critical:"bg-red-100 text-red-700"},x={user:"\uD83D\uDC64 User",v3ktor:"⚡ V3ktor",sub_agent:"\uD83E\uDD16 Sub-Agent"};function m(e){let{tasks:s}=e,[t,l]=(0,r.useState)(null),n=(e,s)=>{console.log("Move task",e,"to",s)},i=s.length;return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.A,{className:"w-6 h-6 text-ft-dark"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-ft-dark font-heading",children:"Task Board"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",(0,a.jsx)("span",{className:"font-mono",children:i})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:c.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 min-h-[380px]",children:[(0,a.jsxs)("h3",{className:"flex items-center justify-between font-semibold mb-3 text-ft-dark pb-2 border-b-2 border-ft-light",children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:s.filter(s=>s.status===e.status).length})]}),(0,a.jsx)("div",{className:"space-y-3",children:s.filter(s=>s.status===e.status).map(s=>(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>l(s.id),onDragEnd:()=>l(null),onClick:()=>{"todo"===e.status?n(s.task_id,"in_progress"):"in_progress"===e.status&&n(s.task_id,"done")},className:"relative cursor-move bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-transform transform hover:-translate-y-0.5",children:[(0,a.jsx)("div",{className:"absolute -left-1 top-4 px-2 py-0.5 text-xs font-semibold rounded-r-md ".concat(o[s.priority]),children:s.priority}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1 font-mono",children:s.task_id}),(0,a.jsx)("div",{className:"font-semibold text-gray-800 mb-2",children:s.title}),s.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:s.description}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-2 pt-2 border-t border-gray-200",children:[(0,a.jsx)("span",{children:x[s.origin]||s.origin}),(0,a.jsx)("span",{children:new Date(s.created_at).toLocaleDateString()})]})]},s.id))})]},e.status))})]})}var h=t(7072);function g(e){let{logs:s}=e,t={success:"text-green-600",partial:"text-yellow-600",failed:"text-red-600"},r={success:"Success",partial:"Partial",failed:"Failed"};return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.A,{className:"w-6 h-6 text-ft-dark"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-ft-dark font-heading",children:"Activity Log"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Recent events"})]}),0===s.length?(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-500",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:"✳"}),(0,a.jsx)("p",{className:"italic",children:"No activity recorded yet."})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-[520px] overflow-y-auto",children:s.map(e=>(0,a.jsx)("div",{className:"border border-gray-100 p-4 rounded-md hover:shadow-md transition-shadow bg-white",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"text-sm font-mono text-gray-400 min-w-[120px]",children:new Date(e.timestamp).toLocaleString()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-gray-800",children:e.action_type}),e.target&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["→ ",e.target]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["by ",e.actor]})]}),e.outcome&&(0,a.jsx)("div",{className:"text-sm font-semibold ".concat(t[e.outcome]),children:r[e.outcome]})]}),e.metadata&&Object.keys(e.metadata).length>0&&(0,a.jsxs)("details",{className:"text-sm mt-2",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-ft-secondary-2 hover:underline",children:"Details"}),(0,a.jsx)("div",{className:"mt-2 pl-3 border-l-2 border-gray-100 text-gray-600",children:Object.entries(e.metadata).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-700",children:[s,":"]})," ",String(t)]},s)})})]})]})]})},e.id))})]})}function u(e){let{notes:s,onAddNote:t,onMarkSeen:l,onMarkProcessed:n}=e,[i,d]=(0,r.useState)(""),c={unseen:"bg-yellow-100 border-yellow-300",seen:"bg-blue-100 border-blue-300",processed:"bg-green-100 border-green-300"},o={unseen:"\uD83D\uDCEC Unseen",seen:"\uD83D\uDC41️ Seen",processed:"✅ Processed"};return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-ft-dark",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v8a2 2 0 01-2 2H7l-5 3V5z"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-ft-dark font-heading",children:"Notes"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.trim()&&(t(i.trim()),d(""))},className:"mb-6",children:[(0,a.jsx)("textarea",{value:i,onChange:e=>d(e.target.value),placeholder:"Add a note or instruction for V3ktor...",className:"input min-h-[80px]",rows:3}),(0,a.jsx)("button",{type:"submit",disabled:!i.trim(),className:"mt-2 btn disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Note"})]}),(0,a.jsx)("div",{className:"space-y-3 max-h-[420px] overflow-y-auto",children:0===s.length?(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-500",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:"\uD83D\uDCAC"}),(0,a.jsx)("p",{className:"italic",children:"No notes yet."})]}):s.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-lg border-2 ".concat(c[e.status]),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("span",{className:"font-semibold ".concat(o[e.status].includes("Unseen")?"text-yellow-800":""),children:o[e.status]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:new Date(e.created_at).toLocaleString()})]}),(0,a.jsx)("p",{className:"text-gray-800 mb-3",children:e.content}),e.related_task_id&&(0,a.jsxs)("div",{className:"text-xs text-ft-dark font-medium",children:["Related to task: ",e.related_task_id]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3 pt-2 border-t border-gray-300",children:["unseen"===e.status&&(0,a.jsx)("button",{onClick:()=>l(e.id),className:"px-3 py-1 text-xs bg-white border border-blue-300 rounded hover:bg-blue-50 transition-colors",children:"Mark Seen"}),"seen"===e.status&&(0,a.jsx)("button",{onClick:()=>n(e.id),className:"px-3 py-1 text-xs bg-white border border-green-300 rounded hover:bg-green-50 transition-colors",children:"Mark Processed"})]})]},e.id))})]})}function b(e){let{deliverables:s}=e,[t,l]=(0,r.useState)(""),[n,i]=(0,r.useState)("all"),d=s.filter(e=>{let s=e.title.toLowerCase().includes(t.toLowerCase()),a="all"===n||e.type===n;return s&&a}),c=Array.from(new Set(s.map(e=>e.type)));return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-ft-dark",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M2 6a2 2 0 012-2h4l2 2h6a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-ft-dark font-heading",children:"Deliverables"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>l(e.target.value),placeholder:"Search deliverables...",className:"input text-sm"}),(0,a.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-md text-sm bg-white focus:outline-none focus:ring-2 focus:ring-ft-light",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),c.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsx)("div",{className:"space-y-3 max-h-[520px] overflow-y-auto",children:0===d.length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No deliverables found."}):d.map(e=>(0,a.jsxs)("div",{className:"border border-gray-100 p-4 rounded-md hover:shadow-md transition-shadow bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:e.title}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1 font-mono",children:["Type: ",(0,a.jsx)("span",{className:"font-medium",children:e.type})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[e.file_path&&(0,a.jsx)("button",{className:"px-3 py-1 text-xs bg-ft-light text-white rounded hover:bg-ft-dark transition-colors",children:"View File"}),e.external_url&&(0,a.jsx)("a",{href:e.external_url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 text-xs bg-ft-light text-white rounded hover:bg-ft-dark transition-colors",children:"External Link"})]})]}),e.related_task_id&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2 pt-2 border-t border-gray-100",children:["Related to task: ",e.related_task_id]})]},e.id))})]})}function v(e){let{usage:s}=e,t=s.reduce((e,s)=>e+s.tokens_used,0),r=s.length>0?Math.round(t/s.length):0;return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-ft-dark",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M10 2a6 6 0 100 12A6 6 0 0010 2zM9 7h2v3H9V7z"})}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-0 text-ft-dark font-heading",children:"Token Usage"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-ft-dark",children:t.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Tokens Used"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-ft-dark",children:s.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Sessions Tracked"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-ft-dark",children:r.toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Per Session"})]})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:s.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-3 rounded-md text-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"font-medium text-gray-800",children:["Session: ",e.session_id]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),(0,a.jsx)("div",{className:"text-lg font-bold text-ft-dark",children:e.tokens_used.toLocaleString()})]},e.id))})]})}function p(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[o,x]=(0,r.useState)([]),[h,p]=(0,r.useState)(null),[j,f]=(0,r.useState)([]);(0,r.useEffect)(()=>{N();let e=()=>{N()};window.addEventListener("v3ktor:refresh",e);let t=l.channel("tasks-channel").on("postgres_changes",{event:"*",schema:"public",table:"tasks"},e=>{("INSERT"===e.eventType||"UPDATE"===e.eventType)&&s(s=>[...s.filter(s=>s.id!==e.new.id),e.new])}),a=l.channel("activity-channel").on("postgres_changes",{event:"*",schema:"public",table:"activity_log"},e=>{"INSERT"===e.eventType&&n(s=>[e.new,...s])}),r=l.channel("notes-channel").on("postgres_changes",{event:"*",schema:"public",table:"notes"},e=>{"INSERT"===e.eventType?c(s=>[e.new,...s]):"UPDATE"===e.eventType&&c(s=>s.map(s=>s.id===e.new.id?e.new:s))}),i=l.channel("status-channel").on("postgres_changes",{event:"*",schema:"public",table:"status"},e=>{"UPDATE"===e.eventType&&p(e.new)}),d=l.channel("deliverables-channel").on("postgres_changes",{event:"*",schema:"public",table:"deliverables"},e=>{"INSERT"===e.eventType&&x(s=>[e.new,...s])}),o=l.channel("tokens-channel").on("postgres_changes",{event:"*",schema:"public",table:"token_usage"},e=>{"INSERT"===e.eventType&&f(s=>[e.new,...s])});return()=>{t.unsubscribe(),a.unsubscribe(),r.unsubscribe(),i.unsubscribe(),d.unsubscribe(),o.unsubscribe(),window.removeEventListener("v3ktor:refresh",e)}},[]);let N=async()=>{let[e,t,a,r,i,d]=await Promise.all([l.from("tasks").select("*").order("created_at",{ascending:!1}),l.from("activity_log").select("*").order("timestamp",{ascending:!1}),l.from("notes").select("*").order("created_at",{ascending:!1}),l.from("status").select("*").single(),l.from("deliverables").select("*").order("created_at",{ascending:!1}),l.from("token_usage").select("*").order("timestamp",{ascending:!1})]);e.data&&s(e.data),t.data&&n(t.data),a.data&&c(a.data),r.data&&p(r.data),i.data&&x(i.data),d.data&&f(d.data)},y=async e=>{let{error:s}=await l.from("notes").insert({content:e,status:"unseen"});s&&console.error("Failed to add note:",s)},w=async e=>{let{error:s}=await l.from("notes").update({status:"seen"}).eq("id",e);s&&console.error("Failed to mark note as seen:",s)},k=async e=>{let{error:s}=await l.from("notes").update({status:"processed",processed_at:new Date().toISOString()}).eq("id",e);s&&console.error("Failed to mark note as processed:",s)};return(0,a.jsx)("div",{className:"min-h-screen",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"md:col-span-1",children:h&&(0,a.jsx)("div",{className:"card",children:(0,a.jsx)(i,{state:h.operational_state,currentTask:h.current_task,currentTaskId:h.current_task_id,activeSubAgents:h.active_sub_agents||[]})})}),(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsx)("div",{className:"card",children:(0,a.jsx)(m,{tasks:e})})}),(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsx)("div",{className:"card",children:(0,a.jsx)(g,{logs:t})})}),(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsx)("div",{className:"card",children:(0,a.jsx)(u,{notes:d,onAddNote:y,onMarkSeen:w,onMarkProcessed:k})})}),(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsx)("div",{className:"card",children:(0,a.jsx)(b,{deliverables:o})})}),(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsx)("div",{className:"card",children:(0,a.jsx)(v,{usage:j})})})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[934,441,517,358],()=>s(3949)),_N_E=e.O()}]);